  litellm:
    image: docker.litellm.ai/berriai/litellm:main-stable
    container_name: blinko-litellm
    restart: always
    environment:
      LITELLM_MASTER_KEY: sk-1234
      DATABASE_URL: postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/litellm
      PERPLEXITYAI_API_KEY: ${PERPLEXITYAI_API_KEY}
      STORE_MODEL_IN_DB: "True"
    volumes:
      - /opt/litellm/litellm-config.yaml:/app/config.yaml:ro
    command:
     - "--config=/app/config.yaml"
    networks:
      internal:
      traefik-net:
        ipv4_address: 172.30.0.4
    healthcheck:  # Defines the health check configuration for the container
      test:
        - CMD-SHELL
        - python3 -c "import urllib.request; urllib.request.urlopen('http://localhost:4000/health/liveliness')"  # Command to execute for health check
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s